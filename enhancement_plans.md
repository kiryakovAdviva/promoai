# План улучшений RAG системы

## 1. Multi-step RAG
- [ ] Реализовать двухэтапный поиск
  - [ ] Первый этап: широкий поиск (top_k=50)
  - [ ] Второй этап: уточняющий поиск в контексте
  - [ ] Интеграция с существующим поиском
  - [ ] Тестирование на реальных запросах

## 2. Reranking
- [ ] Добавить переранжирование результатов
  - [ ] Интеграция cross-encoder модели
  - [ ] Настройка весов для разных типов документов
  - [ ] Оптимизация производительности
  - [ ] Тестирование качества ранжирования

## 3. Contextual Compression
- [ ] Реализовать сжатие контекста
  - [ ] Разбиение на предложения
  - [ ] Оценка релевантности
  - [ ] Выбор оптимальных частей
  - [ ] Тестирование на разных типах документов

## 4. Интеграция компонентов
- [ ] Объединение всех улучшений
  - [ ] Настройка пайплайна
  - [ ] Оптимизация производительности
  - [ ] Тестирование end-to-end
  - [ ] Документация

## 5. Улучшение ответов
- [ ] Улучшение промптов
  - [ ] Добавление требований к ответам
  - [ ] Указание источников
  - [ ] Структурирование ответов
  - [ ] Тестирование качества

## 6. Мониторинг и метрики
- [ ] Добавление метрик качества
  - [ ] Отслеживание точности
  - [ ] Анализ ошибок
  - [ ] Сбор обратной связи
  - [ ] Визуализация результатов

## Текущий прогресс
- [x] Создание ветки для улучшений
- [x] Документирование планов
- [ ] Начало реализации Multi-step RAG

## Заметки
- Базовая версия сохранена в ветке `feat/encryption-layer`
- Все улучшения будут реализованы в ветке `feat/enhanced-rag`
- Приоритет: Multi-step RAG -> Reranking -> Contextual Compression 